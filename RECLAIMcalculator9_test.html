<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Baggage Carousel Calculator</title>
    <style>
        :root {
            --primary: #33aaff;
            --secondary: #ffaa33;
            --dark-bg: #111;
            --card-bg: #222;
            --text-light: #f0f0f0;
            --text-muted: #aaa;
            --border: #333;
        }
        
        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }
        
        body {
            font-family: Arial, sans-serif;
            line-height: 1.6;
            background: var(--dark-bg);
            color: var(--text-light);
            padding: 20px;
            max-width: 1200px;
            margin: 0 auto;
        }
        
        header {
            text-align: center;
            margin-bottom: 30px;
            padding-bottom: 20px;
            border-bottom: 1px solid var(--border);
        }
        
        h1 {
            color: var(--primary);
            margin-bottom: 10px;
        }
        
        .description {
            color: var(--text-muted);
            max-width: 800px;
            margin: 0 auto;
        }
        
        .calculator-container {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 30px;
            margin-bottom: 40px;
        }
        
        @media (max-width: 900px) {
            .calculator-container {
                grid-template-columns: 1fr;
            }
        }
        
        .input-section, .results-section {
            background: var(--card-bg);
            padding: 25px;
            border-radius: 8px;
            box-shadow: 0 0 10px rgba(0, 0, 0, 0.4);
        }
        
        .form-group {
            margin-bottom: 20px;
        }
        
        label {
            display: block;
            margin-bottom: 8px;
            font-weight: bold;
        }
        
        input, select {
            width: 100%;
            padding: 10px;
            border-radius: 4px;
            border: 1px solid #444;
            background: #333;
            color: var(--text-light);
        }
        
        button {
            width: 100%;
            padding: 12px;
            background: var(--primary);
            color: white;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            font-size: 16px;
            font-weight: bold;
            margin-top: 10px;
            transition: background 0.3s;
        }
        
        button:hover {
            background: #2288cc;
        }
        
        .results-section h3 {
            color: var(--primary);
            margin-bottom: 15px;
            border-bottom: 1px solid var(--border);
            padding-bottom: 10px;
        }
        
        .result-item {
            margin-bottom: 15px;
            padding: 15px;
            background: #2a2a2a;
            border-radius: 4px;
        }
        
        .result-value {
            font-weight: bold;
            color: var(--primary);
            font-size: 18px;
            margin-top: 5px;
        }
        
        .diagrams-container {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin-top: 30px;
        }
        
        @media (max-width: 900px) {
            .diagrams-container {
                grid-template-columns: 1fr;
            }
        }
        
        .diagram {
            background: var(--card-bg);
            padding: 20px;
            border-radius: 8px;
            text-align: center;
        }
        
        .diagram h4 {
            margin-bottom: 15px;
            color: var(--secondary);
        }
        
        .disclaimer {
            background: #333;
            border-left: 4px solid var(--secondary);
            padding: 15px;
            margin: 20px 0;
            border-radius: 4px;
        }
        
        footer {
            margin-top: 40px;
            font-size: 14px;
            color: var(--text-muted);
            border-top: 1px solid var(--border);
            padding-top: 20px;
            text-align: center;
        }
        
        .sources {
            text-align: left;
            max-width: 600px;
            margin: 0 auto 20px;
        }
        
        .author {
            margin-top: 20px;
            font-style: italic;
        }
    </style>
</head>
<body>
    <header>
        <h1>Baggage Carousel Calculator</h1>
        <p class="description">Calculate the required number and configuration of baggage carousels based on aircraft types and carousel specifications.</p>
    </header>
    
    <div class="calculator-container">
        <div class="input-section">
            <h3>Input Parameters</h3>
            
            <div class="form-group">
                <label for="numNarrow">Number of Narrow-body aircraft:</label>
                <input type="number" id="numNarrow" min="0" value="2">
            </div>
            
            <div class="form-group">
                <label for="numWide">Number of Wide-body aircraft:</label>
                <input type="number" id="numWide" min="0" value="1">
            </div>
            
            <div class="form-group">
                <label for="standardLength">Select standard carousel length (m) for equal-length diagram:</label>
                <select id="standardLength">
                    <option value="30">30 m</option>
                    <option value="40">40 m</option>
                    <option value="50">50 m</option>
                    <option value="60">60 m</option>
                    <option value="70">70 m</option>
                    <option value="75">75 m</option>
                    <option value="80">80 m</option>
                    <option value="85">85 m</option>
                    <option value="90">90 m</option>
                    <option value="95">95 m</option>
                    <option value="100">100 m</option>
                </select>
            </div>
            
            <button onclick="calculateCarousels()">Calculate</button>
        </div>
        
        <div class="results-section">
            <h3>Calculation Results</h3>
            <div id="output">
                <p class="result-item">Enter parameters and click Calculate to see results</p>
            </div>
        </div>
    </div>
    
    <footer>
        <div class="sources">
            <strong>Sources:</strong><br>
            IATA Airport Development Reference Manual, 9th Edition (2014)<br>
            National Academies Press – Airport Passenger Terminal Planning and Design (2011)<br>
            Patent EP2669218A1 (Google Patents)<br>
            Aircraft dimensions estimated from A320/B737 and B777 references<br>
            Passenger clearance: 3.5 m | Carousel spacing: 11 m | Min. turning radius: 1.5 m
        </div>
        
        <div class="author">
            <strong>Designed by EL</strong> — This tool is a <em>Work In Progress (WIP)</em> and is not intended for operational use without full verification of all data.
        </div>
    </footer>

    <script>
        function calculateCarousels() {
            const narrow = parseInt(document.getElementById("numNarrow").value) || 0;
            const wide = parseInt(document.getElementById("numWide").value) || 0;
            const standardLength = parseFloat(document.getElementById("standardLength").value);
            const scale = 2;
            const carouselWidth = 6;
            const clearanceZone = 3.5;
            const spacing = 11;
            
            const aircraftCarouselLengths = {
                "Narrow-body": 60,
                "Wide-body": 85,
            };
            
            let carousels = [];
            for (let i = 0; i < narrow; i++) carousels.push(aircraftCarouselLengths["Narrow-body"]);
            for (let i = 0; i < wide; i++) carousels.push(aircraftCarouselLengths["Wide-body"]);
            
            const totalLength = carousels.reduce((sum, len) => sum + len, 0);
            const totalCarousels = carousels.length;
            
            // Equal length carousels (use selected size only)
            const numEqualLengthCarousels = totalLength === 0 ? 0 : Math.ceil(totalLength / standardLength);
            const equalLengthCarousels = new Array(numEqualLengthCarousels).fill(standardLength);
            
            const clearancePx = clearanceZone * scale;
            const spacingPx = spacing * scale;
            const widthPx = carouselWidth * scale;
            
            const totalHeight1 = totalCarousels * (widthPx + clearancePx * 2 + spacingPx) + 80;
            const totalHeight2 = numEqualLengthCarousels * (widthPx + clearancePx * 2 + spacingPx) + 80;
            
            const diagramWidth1 = 320; // ~8cm width
            const diagramWidth2 = 320;
            
            function drawCarousels(lengthsArray, containerWidth, containerHeight, title) {
                if (lengthsArray.length === 0) {
                    return `<p style="text-align:center; color:#aaa; font-style:italic;">No carousels to display.</p>`;
                }
                
                let svg = `<svg width="${containerWidth}" height="${containerHeight}" role="img" aria-label="${title}">`;
                svg += `<text x="${containerWidth/2}" y="25" fill="#33aaff" font-size="18" font-weight="bold" text-anchor="middle">${title}</text>`;
                
                lengthsArray.forEach((length, i) => {
                    const yCenter = i * (widthPx + clearancePx * 2 + spacingPx) + 60;
                    const carouselLengthPx = length * scale;
                    const xCarousel = (containerWidth - carouselLengthPx) / 2;
                    
                    svg += `
                        <!-- Clearance zone -->
                        <rect x="${xCarousel - clearancePx}" y="${yCenter - widthPx / 2 - clearancePx}" 
                              width="${carouselLengthPx + clearancePx * 2}" height="${widthPx + clearancePx * 2}" 
                              fill="none" stroke="#666" stroke-dasharray="4" />
                              
                        <!-- Carousel -->
                        <rect x="${xCarousel}" y="${yCenter - widthPx / 2}" 
                              width="${carouselLengthPx}" height="${widthPx}" 
                              rx="20" ry="20" fill="#33aaff" stroke="#fff" stroke-width="2" />
                              
                        <!-- Carousel label -->
                        <text x="${containerWidth / 2}" y="${yCenter}" text-anchor="middle" dy=".3em" 
                              fill="#fff" font-size="16">Carousel ${i + 1}</text>
                              
                        <!-- Length dimension -->
                        <line x1="${xCarousel}" y1="${yCenter + widthPx / 2 + 20}" 
                              x2="${xCarousel + carouselLengthPx}" y2="${yCenter + widthPx / 2 + 20}" 
                              stroke="#aaa" marker-start="url(#arrow)" marker-end="url(#arrow)" />
                        <text x="${containerWidth / 2}" y="${yCenter + widthPx / 2 + 35}" 
                              text-anchor="middle" font-size="12" fill="#aaa">${length.toFixed(2)} m</text>
                              
                        <!-- Width dimension -->
                        <line x1="${containerWidth - 40}" y1="${yCenter - widthPx / 2}" 
                              x2="${containerWidth - 40}" y2="${yCenter + widthPx / 2}" 
                              stroke="#aaa" marker-start="url(#arrow)" marker-end="url(#arrow)" />
                        <text x="${containerWidth - 45}" y="${yCenter}" text-anchor="end" font-size="12" fill="#aaa" 
                              transform="rotate(-90, ${containerWidth - 45}, ${yCenter})">6 m</text>
                    `;
                });
                
                svg += `
                    <defs>
                        <marker id="arrow" markerWidth="10" markerHeight="10" refX="5" refY="3" orient="auto" markerUnits="strokeWidth">
                            <path d="M0,0 L0,6 L9,3 z" fill="#aaa" />
                        </marker>
                    </defs>
                `;
                
                svg += `</svg>`;
                return svg;
            }
            
            const variableDiagram = drawCarousels(carousels, diagramWidth1, totalHeight1, "Variable Length Carousels");
            const equalDiagram = drawCarousels(equalLengthCarousels, diagramWidth2, totalHeight2, `Equal Length Carousels (${numEqualLengthCarousels} units)`);
            
            document.getElementById("output").innerHTML = `
                <div class="result-item">
                    <p>Number of variable length carousels required:</p>
                    <p class="result-value">${totalCarousels}</p>
                </div>
                
                <div class="result-item">
                    <p>Number of equal length carousels required:</p>
                    <p class="result-value">${numEqualLengthCarousels}</p>
                </div>
                
                <div class="result-item">
                    <p>Total combined carousel length needed:</p>
                    <p class="result-value">${totalLength.toFixed(2)} meters</p>
                </div>
                
                <div class="result-item">
                    <p>Passenger clearance zone:</p>
                    <p class="result-value">3.5 meters</p>
                </div>
                
                <div class="result-item">
                    <p>Minimum spacing between carousels:</p>
                    <p class="result-value">11 meters</p>
                </div>
                
                <div class="result-item">
                    <p>Minimum turning radius:</p>
                    <p class="result-value">1.5 meters</p>
                </div>
                
                <div class="disclaimer">
                    <strong>Disclaimer:</strong><br>
                    This tool provides a schematic estimation only. All carousel dimensions and layouts must be verified by qualified airport planning professionals. For accurate planning and compliance, consult the latest <em>IATA Airport Development Reference Manual</em> and relevant technical documents.
                </div>
                
                <h3>Diagrams:</h3>
                <div class="diagrams-container">
                    <div class="diagram">${variableDiagram}</div>
                    <div class="diagram">${equalDiagram}</div>
                </div>
            `;
        }
        
        // Initialize with default values
        calculateCarousels();
    </script>
</body>
</html>
